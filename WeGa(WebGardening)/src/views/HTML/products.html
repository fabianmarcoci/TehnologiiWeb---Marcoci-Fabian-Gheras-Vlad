<!DOCTYPE html>
<html lang="en">
<head>
    <title>Web Gardening</title>
    <link rel="icon" type="image/png" id="logo-icon" href="../../static/img/favicon.png" sizes="16x16">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="../../static/CSS/products.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Raleway:wght@800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Arizonia&family=Oswald:wght@300&family=Playfair+Display:ital@1&family=Raleway:wght@500;800&display=swap" rel="stylesheet">
</head>
<body>
<header>
    <div class="first-line">
        <div class="logo">
            <a href="index.html" id="WeGa"><span class="first-letter">W</span>e<span class="third-letter">G</span>a</a>
            <img src="../../static/img/favicon.png" class="plant-logo" alt="Plant Logo">
        </div>
        <div class="header-buttons">
            <a href="login.html" class="button" id="login-button">Login</a>
            <a href="register.html" class="button" id="register-button">Register</a>
            <a href="#" class="button" id="logout-button" style="display: none;" onclick="logout()">Logout</a>
            <a href="crops.html" class="button">Crops</a>
            <a href=" shoppingcart.html" class="button">Shopping cart</a>
        </div>


    </div>
</header>

<div class="cards-container">
    <div class="card">
        <div class="card-overlay"></div>
        <div class="card-inner">
            <div class="title">Filters</div>
            <div class="section-title">Utensils</div>
            <label class="radio-button">
                <input value="option1" name="category1" type="radio">
                <span class="radio"></span>
                shovels
            </label>
            <label class="radio-button">
                <input value="option2" name="category1" type="radio">
                <span class="radio"></span>
                rakes
            </label>
            <label class="radio-button">
                <input value="option3" name="category1" type="radio">
                <span class="radio"></span>
                watering cans
            </label>
            <label class="radio-button">
                <input value="option4" name="category1" type="radio">
                <span class="radio"></span>
                automatic watering systems
            </label>
            <label class="radio-button">
                <input value="option5" name="category1" type="radio">
                <span class="radio"></span>
                pots
            </label>
            <label class="radio-button">
                <input value="option6" name="category1" type="radio">
                <span class="radio"></span>
                other decorative items
            </label>
            <div class="second-section">Price</div>
            <label class="radio-button">
                <input value="option1" name="category2" type="radio">
                <span class="radio"></span>
                <300 ron
            </label>
            <label class="radio-button">
                <input value="option2" name="category2" type="radio">
                <span class="radio"></span>
                300-500 ron
            </label>
            <label class="radio-button">
                <input value="option3" name="category2" type="radio">
                <span class="radio"></span>
                >500 ron
            </label>
            <div class="second-section">Order</div>
            <label class="radio-button">
                <input value="option1" name="category3" type="radio">
                <span class="radio"></span>
                Most ordered
            </label>
            <label class="radio-button">
                <input value="option2" name="category3" type="radio">
                <span class="radio"></span>
                Show all
            </label>
            <button id="Card-button">Apply filters</button>
        </div>
    </div>

    <div class="card2">
        <div class="image">
            <img src="../../static/img/irrigation.jpg">
        </div>
        <span class="title">Irrigation System</span>
        <span class="price">650 ron</span>
        <div class="add-to-cart" onclick="addToCart(this.parentElement)">Add to Cart</div>
    </div>

    <div class="card2">
        <div class="image">
            <img src="../../static/img/small-shovel.jpg">
        </div>
        <span class="title">Small shovel</span>
        <span class="price">89,99 ron</span>
        <div class="add-to-cart" onclick="addToCart(this.parentElement)">Add to Cart</div>
    </div>

    <div class="card2">
        <div class="image">
            <img src="../../static/img/metal-solid-rake.jpeg">
        </div>
        <span class="title">Solid Rake</span>
        <span class="price">174,99 ron</span>
        <div class="add-to-cart" onclick="addToCart(this.parentElement)">Add to Cart</div>
    </div>

</div>

<script>
    window.onload = function() {
        var loggedIn = document.cookie.includes('loggedIn=true');

        if (loggedIn) {
            document.getElementById('login-button').style.display = 'none';
            document.getElementById('register-button').style.display = 'none';
            document.getElementById('logout-button').style.display = 'block';

            var logoLink = document.getElementById('WeGa');
            logoLink.addEventListener('click', function(event) {
                event.preventDefault();
                window.location.href = 'userview.html';
            });
        }
    }

    function logout() {
        document.cookie = "email=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";
        document.cookie = "password=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";
        document.cookie = "loggedIn=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";
        window.location.href = '/TehnologiiWeb---Marcoci-Fabian-Gheras-Vlad/WeGa(WebGardening)/src/views/HTML/index.html';
    }

    function addToCart(card) {
        var loggedIn = document.cookie.includes('loggedIn=true');
        if (!loggedIn) {
            alert("Please log in to add items to the cart.");
            return;
        }

        var addToCartButton = card.querySelector('.add-to-cart');

        addToCartButton.classList.add("disabled");
        addToCartButton.textContent = "Added !";

        if (localStorage.getItem('cart') === null) {
            localStorage.setItem('cart', JSON.stringify([]));
        }

        var itemTitle = card.querySelector('.title').innerText;
        var itemPrice = card.querySelector('.price').innerText;
        var itemImg = card.querySelector('.image img').src;

        var cart = JSON.parse(localStorage.getItem('cart'));
        var existingItem = cart.find(item => item.title === itemTitle);

        if (existingItem) {
            existingItem.count++;
        } else {
            var item = {
                title: itemTitle,
                price: itemPrice,
                img: itemImg,
                count: 1
            };
            cart.push(item);
        }

        localStorage.setItem('cart', JSON.stringify(cart));

        setTimeout(function() {
            addToCartButton.classList.remove("disabled");
            addToCartButton.textContent = "Add to Cart";
        }, 2000);
    }
</script>
</body>
</html>

